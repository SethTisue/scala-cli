(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{101:function(e,a,n){"use strict";n.r(a),n.d(a,"frontMatter",(function(){return i})),n.d(a,"metadata",(function(){return o})),n.d(a,"toc",(function(){return r})),n.d(a,"default",(function(){return s}));var t=n(3),l=n(7),c=(n(0),n(112)),i={title:"Compile",sidebar_position:5},o={unversionedId:"compile",id:"compile",isDocsHomePage:!1,title:"Compile",description:"The Scala CLI can compile your code with its compile command:",source:"@site/docs/compile.md",sourceDirName:".",slug:"/compile",permalink:"/docs/compile",editUrl:"https://github.com/Virtuslab/scala-cli/edit/master/website/docs/compile.md",version:"current",sidebarPosition:5,frontMatter:{title:"Compile",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Configuration",permalink:"/docs/configuration"},next:{title:"Run",permalink:"/docs/run"}},r=[{value:"Watch mode",id:"watch-mode",children:[]},{value:"Scala compiler options",id:"scala-compiler-options",children:[]},{value:"Scala compiler plugins",id:"scala-compiler-plugins",children:[]},{value:"Scala version",id:"scala-version",children:[]},{value:"Dependencies",id:"dependencies",children:[]},{value:"Printing a class path",id:"printing-a-class-path",children:[]}],p={toc:r};function s(e){var a=e.components,n=Object(l.a)(e,["components"]);return Object(c.b)("wrapper",Object(t.a)({},p,n,{components:a,mdxType:"MDXLayout"}),Object(c.b)("p",null,"The Scala CLI can compile your code with its ",Object(c.b)("inlineCode",{parentName:"p"},"compile")," command:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-bash"},'cat Hello.scala\n# object Hello {\n#   def main(args: Array[String]): Unit =\n#     println("Hello")\n# }\nscala-cli compile Hello.scala\n')),Object(c.b)("p",null,"Note that most commands of the Scala CLI will automatically compile your code if necessary.\nThe ",Object(c.b)("inlineCode",{parentName:"p"},"compile")," command is useful if you'd like to simply check that your code compiles,\nor know of compilation warnings, without running it or packaging it for example."),Object(c.b)("p",null,"We list below some options the ",Object(c.b)("inlineCode",{parentName:"p"},"compile")," command accepts. For a full list of options,\nrun ",Object(c.b)("inlineCode",{parentName:"p"},"scala compile --help"),", or check the options linked in the\n",Object(c.b)("a",{parentName:"p",href:"/docs/reference/commands#compile"},"reference documentation"),"."),Object(c.b)("h2",{id:"watch-mode"},"Watch mode"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"--watch")," makes ",Object(c.b)("inlineCode",{parentName:"p"},"scala-cli")," watch your code for changes, and re-compiles it upon change:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-bash"},"scala-cli compile --watch Hello.scala\n# Compiling project-cef76d561e (1 Scala source)\n# Compiled 'project-cef76d561e'\n# Watching sources, press Ctrl+C to exit.\n# Compiling project-cef76d561e (1 Scala source)\n# Compiled 'project-cef76d561e'\n# Watching sources, press Ctrl+C to exit.\n")),Object(c.b)("h2",{id:"scala-compiler-options"},"Scala compiler options"),Object(c.b)("p",null,"Most ",Object(c.b)("a",{parentName:"p",href:"https://docs.scala-lang.org/overviews/compiler-options"},"Scala compiler options")," can be passed as\nis to ",Object(c.b)("inlineCode",{parentName:"p"},"scala-cli")," :"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-bash"},"scala-cli compile Hello.scala -Xlint:infer-any\n# Compiling project_b729aa2200-cef76d561e (1 Scala source)\n# [warn] ./Hello.scala:2:11: a type was inferred to be `Any`; this may indicate a programming error.\n# [warn]   val l = List(\"a\", true, 2, new Object)\n# [warn]           ^\n# Compiled 'project_b729aa2200-cef76d561e'\n")),Object(c.b)("p",null,"In more detail, all options starting with"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"-g")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"-language")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"-opt")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"-P")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"-target")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"-V")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"-W")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"-X")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"-Y"))),Object(c.b)("p",null,"are assumed to be Scala compiler options."),Object(c.b)("p",null,"Compiler options can also be passed with ",Object(c.b)("inlineCode",{parentName:"p"},"-O"),":"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-bash"},"scala-cli compile Hello.scala -O -deprecation -O -Xlint:infer-any\n# [warn] ./Hello.scala:3:7: method x in class Some is deprecated (since 2.12.0): Use .value instead.\n# [warn]   opt.x\n# [warn]       ^\n")),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"-O")," accepts both options with the prefixes above and those without such a prefix."),Object(c.b)("h2",{id:"scala-compiler-plugins"},"Scala compiler plugins"),Object(c.b)("p",null,"Use ",Object(c.b)("inlineCode",{parentName:"p"},"--compiler-plugin")," to add compiler plugin dependencies:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-bash"},"scala-cli compile Main.scala --compiler-plugin org.typelevel:::kind-projector:0.13.2 --scala 2.12.14\n")),Object(c.b)("h2",{id:"scala-version"},"Scala version"),Object(c.b)("p",null,"Specify the Scala version you'd like to use with ",Object(c.b)("inlineCode",{parentName:"p"},"--scala"),":"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-bash"},"scala-cli compile --scala 2.13.6 Hello.scala\n")),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"scala-cli")," should work with all major ",Object(c.b)("inlineCode",{parentName:"p"},"2.12.x"),", ",Object(c.b)("inlineCode",{parentName:"p"},"2.13.x"),", and ",Object(c.b)("inlineCode",{parentName:"p"},"3.x")," Scala versions."),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"--scala"),' also accepts "short" Scala versions, such as ',Object(c.b)("inlineCode",{parentName:"p"},"2.12"),", ",Object(c.b)("inlineCode",{parentName:"p"},"2"),", or ",Object(c.b)("inlineCode",{parentName:"p"},"3"),". In that\ncase, it picks the highest corresponding stable Scala version:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-bash"},"scala-cli compile --scala 2.12 Hello.scala\nscala-cli compile --scala 2 Hello.scala\nscala-cli compile --scala 3 Hello.scala\n")),Object(c.b)("h2",{id:"dependencies"},"Dependencies"),Object(c.b)("p",null,"You can add dependencies on the command-line, via ",Object(c.b)("inlineCode",{parentName:"p"},"--dependency"),":"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-bash"},"scala-cli compile Hello.scala --dependency dev.zio::zio:1.0.9\n")),Object(c.b)("p",null,"Note that ",Object(c.b)("inlineCode",{parentName:"p"},"--dependency")," is only meant as a convenience. You should favor\nadding dependencies in the sources themselves (via ",Object(c.b)("inlineCode",{parentName:"p"},"import $dep"),")\nor in a configuration file."),Object(c.b)("p",null,"You can also add repositories on the command-line, via ",Object(c.b)("inlineCode",{parentName:"p"},"--repository"),":"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-bash"},"scala-cli compile Hello.scala --dependency com.pany::util:33.1.0 --repo https://artifacts.pany.com/maven\n")),Object(c.b)("p",null,"Lastly, you can also add simple JAR files as dependencies, with ",Object(c.b)("inlineCode",{parentName:"p"},"--jar"),":"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-bash"},"scala-cli compile Hello.scala --jar /path/to/library.jar\n")),Object(c.b)("h2",{id:"printing-a-class-path"},"Printing a class path"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"--class-path")," makes ",Object(c.b)("inlineCode",{parentName:"p"},"scala compile")," print a class path that can be passed to other tools:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-bash"},"scala-cli compile --class-path Hello.scala\n# /work/.scala/project-cef76d561e/classes:~/Library/Caches/Coursier/v1/https/repo1.maven.org/maven2/org/scala-lang/scala-library/2.12.14/scala-library-2.12.14.jar:~/Library/Caches/ScalaCli/local-repo/0.1.0/org.virtuslab.scala-cli/runner_2.12/0.0.1-SNAPSHOT/jars/runner_2.12.jar:~/Library/Caches/ScalaCli/local-repo/0.1.0/org.virtuslab.scala-cli/stubs/0.0.1-SNAPSHOT/jars/stubs.jar\n")),Object(c.b)("p",null,"You can pass this class path to ",Object(c.b)("inlineCode",{parentName:"p"},"java -cp")," for example:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-bash"},'java -cp "$(scala compile --class-path Hello.scala)" Hello\n# Hello\n')),Object(c.b)("p",null,"Note that you should favor the ",Object(c.b)("a",{parentName:"p",href:"/docs/run"},Object(c.b)("inlineCode",{parentName:"a"},"run"))," command to run your code, rather than running ",Object(c.b)("inlineCode",{parentName:"p"},"java -cp"),".\nThe class path obtained this way is meant for scenarios where ",Object(c.b)("inlineCode",{parentName:"p"},"scala-cli")," doesn't offer a more\nconvenient option."))}s.isMDXComponent=!0},112:function(e,a,n){"use strict";n.d(a,"a",(function(){return b})),n.d(a,"b",(function(){return u}));var t=n(0),l=n.n(t);function c(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function i(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function o(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?i(Object(n),!0).forEach((function(a){c(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function r(e,a){if(null==e)return{};var n,t,l=function(e,a){if(null==e)return{};var n,t,l={},c=Object.keys(e);for(t=0;t<c.length;t++)n=c[t],a.indexOf(n)>=0||(l[n]=e[n]);return l}(e,a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(t=0;t<c.length;t++)n=c[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var p=l.a.createContext({}),s=function(e){var a=l.a.useContext(p),n=a;return e&&(n="function"==typeof e?e(a):o(o({},a),e)),n},b=function(e){var a=s(e.components);return l.a.createElement(p.Provider,{value:a},e.children)},m={inlineCode:"code",wrapper:function(e){var a=e.children;return l.a.createElement(l.a.Fragment,{},a)}},d=l.a.forwardRef((function(e,a){var n=e.components,t=e.mdxType,c=e.originalType,i=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),b=s(n),d=t,u=b["".concat(i,".").concat(d)]||b[d]||m[d]||c;return n?l.a.createElement(u,o(o({ref:a},p),{},{components:n})):l.a.createElement(u,o({ref:a},p))}));function u(e,a){var n=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var c=n.length,i=new Array(c);i[0]=d;var o={};for(var r in a)hasOwnProperty.call(a,r)&&(o[r]=a[r]);o.originalType=e,o.mdxType="string"==typeof e?e:t,i[1]=o;for(var p=2;p<c;p++)i[p]=n[p];return l.a.createElement.apply(null,i)}return l.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);